<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOODEALS Genius | Strategic Implementation Hub</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

    <!-- Chosen Palette: Warm Professional
         Backgrounds: Warm Neutrals (Stone-50, Orange-50)
         Text: Slate-800, Gray-600
         Accents: GOODEALS Orange (Orange-500), Trust Blue (Blue-600), Success Green (Emerald-500)
    -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            orange: '#f97316', // Orange-500
                            dark: '#1e293b',   // Slate-800
                            light: '#fafaf9',  // Stone-50
                            accent: '#3b82f6', // Blue-500
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        /* Chart Container Utilities */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%; 
            height: 300px;
            margin: 0 auto;
        }
        
        @media (min-width: 1024px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Smooth Transitions */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .nav-item.active {
            background-color: #fff7ed; /* Orange-50 */
            color: #c2410c; /* Orange-700 */
            border-right: 3px solid #f97316;
        }
    </style>
</head>
<body class="bg-stone-50 text-slate-800 font-sans antialiased h-screen flex overflow-hidden">

    <!-- Application Structure Plan:
         - Sidebar Navigation: Permanent access to key report sections (Dashboard, Strategy, Architecture, Execution, Safety).
         - Main Content Area: Dynamic container managed by JS state.
         - Dashboard: High-level summary, North Star metrics (Counters), Readiness Gauge (Doughnut Chart).
         - Strategy: Interactive Role Cards (Buyer, Vendor, etc.) showing specific AI outcomes.
         - Architecture: Split view for Backend Pillars and Frontend UX Principles using grid layouts.
         - Execution: Interactive Timeline (Bar Chart as Gantt) for Waves and Sprints.
         - Safety: Visual breakdown of Prompt Engineering and Incident Response.
         - Rationale: The source report is dense with planning data. A dashboard approach breaks this into consumable "views" catering to different stakeholders (Execs check Dashboard, Devs check Architecture/Execution).
    -->

    <!-- Sidebar -->
    <aside class="w-64 bg-white border-r border-stone-200 flex flex-col shadow-sm z-10 hidden md:flex">
        <div class="p-6 border-b border-stone-100 flex items-center gap-3">
            <div class="w-8 h-8 bg-brand-orange rounded-lg flex items-center justify-center text-white font-bold text-lg">G</div>
            <h1 class="font-serif text-xl font-bold text-slate-800 tracking-tight">Genius Hub</h1>
        </div>

        <nav class="flex-1 overflow-y-auto py-4">
            <ul class="space-y-1">
                <li>
                    <button onclick="navigateTo('dashboard')" id="nav-dashboard" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-stone-50 hover:text-brand-orange transition-colors flex items-center gap-3 active">
                        <span>üìä</span> Dashboard
                    </button>
                </li>
                <li>
                    <button onclick="navigateTo('strategy')" id="nav-strategy" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-stone-50 hover:text-brand-orange transition-colors flex items-center gap-3">
                        <span>üéØ</span> Strategy & Roles
                    </button>
                </li>
                <li>
                    <button onclick="navigateTo('architecture')" id="nav-architecture" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-stone-50 hover:text-brand-orange transition-colors flex items-center gap-3">
                        <span>üèóÔ∏è</span> Architecture
                    </button>
                </li>
                <li>
                    <button onclick="navigateTo('execution')" id="nav-execution" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-stone-50 hover:text-brand-orange transition-colors flex items-center gap-3">
                        <span>üöÄ</span> Execution Roadmap
                    </button>
                </li>
                <li>
                    <button onclick="navigateTo('safety')" id="nav-safety" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-stone-50 hover:text-brand-orange transition-colors flex items-center gap-3">
                        <span>üõ°Ô∏è</span> Safety & Alignment
                    </button>
                </li>
            </ul>
        </nav>

        <div class="p-4 border-t border-stone-100">
            <div class="bg-blue-50 rounded-lg p-3 text-xs text-blue-700">
                <p class="font-semibold mb-1">Status: Planning Phase</p>
                <p>Version 1.0</p>
            </div>
        </div>
    </aside>

    <!-- Mobile Header -->
    <div class="md:hidden fixed top-0 left-0 right-0 bg-white border-b border-stone-200 p-4 z-20 flex justify-between items-center">
        <div class="flex items-center gap-2">
            <div class="w-6 h-6 bg-brand-orange rounded flex items-center justify-center text-white font-bold text-sm">G</div>
            <span class="font-serif font-bold text-slate-800">Genius Hub</span>
        </div>
        <button onclick="toggleMobileMenu()" class="text-slate-600 focus:outline-none">
            ‚ò∞
        </button>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden" onclick="toggleMobileMenu()">
        <div class="bg-white w-64 h-full shadow-lg p-4" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                <span class="font-bold text-lg">Menu</span>
                <button onclick="toggleMobileMenu()" class="text-slate-500">‚úï</button>
            </div>
            <nav class="space-y-2">
                <button onclick="navigateTo('dashboard'); toggleMobileMenu()" class="block w-full text-left py-2 px-3 rounded hover:bg-orange-50 text-slate-700">Dashboard</button>
                <button onclick="navigateTo('strategy'); toggleMobileMenu()" class="block w-full text-left py-2 px-3 rounded hover:bg-orange-50 text-slate-700">Strategy</button>
                <button onclick="navigateTo('architecture'); toggleMobileMenu()" class="block w-full text-left py-2 px-3 rounded hover:bg-orange-50 text-slate-700">Architecture</button>
                <button onclick="navigateTo('execution'); toggleMobileMenu()" class="block w-full text-left py-2 px-3 rounded hover:bg-orange-50 text-slate-700">Execution</button>
                <button onclick="navigateTo('safety'); toggleMobileMenu()" class="block w-full text-left py-2 px-3 rounded hover:bg-orange-50 text-slate-700">Safety</button>
            </nav>
        </div>
    </div>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-4 md:p-8 mt-14 md:mt-0 relative" id="main-content">
        <!-- Views will be injected here by JS -->
    </main>

    <!-- Visualization & Content Choices:
         1. Dashboard: 
            - Goal: Immediate situational awareness of the project's goals and health.
            - Viz: "North Star" metrics displayed as large, clean numbers. Doughnut chart for Readiness Gate status (Visualizing the checklist).
         2. Strategy:
            - Goal: Explain complex multi-role benefits clearly.
            - Viz: Interactive Grid Cards. Hover/Click to reveal specific "Strategic Outcomes" for Buyer, Vendor, etc.
         3. Execution:
            - Goal: Show the timeline of Waves (Backend) and Sprints (Frontend).
            - Viz: Chart.js Horizontal Bar chart to simulate a Gantt chart. Colors differentiate Backend vs Frontend.
         4. Architecture:
            - Goal: Break down dense technical pillars.
            - Viz: HTML Grid layout with iconography for pillars.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <script>
        // --- Data Store ---
        const reportData = {
            northStars: [
                { label: "Conversion Uplift", value: 18, suffix: "%", desc: "Product discovery to add-to-cart" },
                { label: "Support Latency", value: -25, suffix: "%", desc: "First-response reduction via AI" },
                { label: "Pricing Accuracy", value: 12, suffix: "%", desc: "Vendor pricing vs benchmark" },
                { label: "Affiliate CTR", value: 20, suffix: "%", desc: "AI-curated bundle clicks" },
                { label: "Safety Score", value: 99, suffix: "%", desc: "Audited safe responses" }
            ],
            readiness: {
                pass: 6,
                total: 6,
                items: [
                    "Latency p95 < 2.5s",
                    "Hallucination audit pass (>=98%)",
                    "Security pen test findings resolved",
                    "Support escalation pipeline functioning",
                    "Cost / session within budget",
                    "Data retention & purge validated"
                ]
            },
            roles: [
                {
                    title: "Buyer",
                    icon: "üõí",
                    outcome: "Confidence & Clarity",
                    details: "Collapse friction from discovery ‚Üí decision. 24/7 shopping assistant that understands cultural context."
                },
                {
                    title: "Vendor",
                    icon: "üè™",
                    outcome: "Competence & Growth",
                    details: "Pricing guidance, catalog optimization, and fulfillment insights to boost margins."
                },
                {
                    title: "Affiliate",
                    icon: "üì¢",
                    outcome: "Persuasion & Reach",
                    details: "Data-backed recommendation bundles to increase click-through rates."
                },
                {
                    title: "Admin",
                    icon: "üõ°Ô∏è",
                    outcome: "Insight & Safety",
                    details: "Anomaly detection, operational risks surfacing, and hallucination monitoring."
                }
            ],
            roadmap: {
                backend: [
                    { name: "Wave 1: Core Skeleton", duration: 2, start: 0 },
                    { name: "Wave 2: Product Discovery", duration: 2, start: 2 },
                    { name: "Wave 3: Pricing & Personalization", duration: 2, start: 4 },
                    { name: "Wave 4: Safety Hardening", duration: 1, start: 6 },
                    { name: "Wave 5: Catalog Advisor", duration: 1, start: 7 }
                ],
                frontend: [
                    { name: "Sprint 1: Chat UI & Telemetry", duration: 2, start: 1 }, // Staggered start
                    { name: "Sprint 2: Product Discovery UI", duration: 2, start: 3 },
                    { name: "Sprint 3: Pricing Assist Widget", duration: 2, start: 5 },
                    { name: "Sprint 4: Memory & Audit", duration: 1, start: 7 },
                    { name: "Sprint 5: Affiliate Tools", duration: 1, start: 8 }
                ]
            },
            backendPillars: [
                { title: "Modularity", desc: "Dedicated AiModule with clear sub-domains (ingest, retrieval, inference)." },
                { title: "Observability", desc: "Structured tracing, metrics aggregation, cost tracking." },
                { title: "Determinism", desc: "Versioned prompt templates & reproducible retrieval queries." },
                { title: "Safety", desc: "Multi-layer filters: input sanitation, visibility filtering, output classifier." },
                { title: "Performance", desc: "Caching embeddings, streaming responses, parallel retrieval." },
                { title: "Extensibility", desc: "Register new capabilities via CapabilityProvider interface." }
            ],
            uxPrinciples: [
                { title: "Low Friction", desc: "One-click summon & inline smart suggestions." },
                { title: "Transparency", desc: "Source citations tooltip for every AI claim." },
                { title: "Control", desc: "Clear user memory reset & opt-out toggles." },
                { title: "Progress", desc: "Streaming token animation & skeleton loaders." },
                { title: "Safety", desc: "Visually distinct escalation notices." }
            ]
        };

        // --- State Management ---
        let currentState = 'dashboard';

        // --- Core Logic ---

        function init() {
            navigateTo('dashboard');
        }

        function navigateTo(viewId) {
            currentState = viewId;
            
            // Update UI Nav
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            const activeNav = document.getElementById(`nav-${viewId}`);
            if(activeNav) activeNav.classList.add('active');

            // Render View
            const mainContent = document.getElementById('main-content');
            mainContent.innerHTML = ''; // Clear current
            
            // Scroll to top
            mainContent.scrollTop = 0;

            switch(viewId) {
                case 'dashboard': renderDashboard(mainContent); break;
                case 'strategy': renderStrategy(mainContent); break;
                case 'architecture': renderArchitecture(mainContent); break;
                case 'execution': renderExecution(mainContent); break;
                case 'safety': renderSafety(mainContent); break;
            }
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // --- View Renderers ---

        function renderDashboard(container) {
            // Header
            const header = document.createElement('div');
            header.className = "mb-8 fade-in";
            header.innerHTML = `
                <h2 class="text-3xl font-serif font-bold text-slate-800 mb-2">Mission Control</h2>
                <p class="text-slate-600 max-w-3xl">Delivering the most contextually intelligent, culturally aware, and trustworthy e-commerce AI in Africa. GOODEALS Genius elevates every interaction from discovery to decision.</p>
            `;
            container.appendChild(header);

            // North Star Metrics Grid
            const metricsGrid = document.createElement('div');
            metricsGrid.className = "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8 fade-in";
            
            reportData.northStars.forEach((metric, index) => {
                const card = document.createElement('div');
                card.className = "bg-white p-6 rounded-xl shadow-sm border border-stone-100 hover:shadow-md transition-shadow";
                card.innerHTML = `
                    <p class="text-xs font-semibold text-brand-orange uppercase tracking-wider mb-1">${metric.label}</p>
                    <div class="text-3xl font-bold text-slate-800 mb-1 flex items-baseline">
                        <span id="counter-${index}">0</span>${metric.suffix}
                    </div>
                    <p class="text-xs text-slate-500 leading-tight">${metric.desc}</p>
                `;
                metricsGrid.appendChild(card);
            });
            container.appendChild(metricsGrid);

            // Charts Section
            const chartsSection = document.createElement('div');
            chartsSection.className = "grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8 fade-in";
            
            // Chart 1: Project Health / Readiness
            const readinessContainer = document.createElement('div');
            readinessContainer.className = "bg-white p-6 rounded-xl shadow-sm border border-stone-100 lg:col-span-1";
            readinessContainer.innerHTML = `
                <h3 class="font-bold text-lg mb-4 text-slate-800">Go/No-Go Readiness</h3>
                <div class="chart-container relative">
                    <canvas id="readinessChart"></canvas>
                    <div class="absolute inset-0 flex items-center justify-center flex-col pointer-events-none">
                        <span class="text-3xl font-bold text-emerald-600">100%</span>
                        <span class="text-xs text-slate-500">Ready for GA</span>
                    </div>
                </div>
                <ul class="mt-4 space-y-2 text-sm text-slate-600">
                    ${reportData.readiness.items.map(item => `<li class="flex items-center gap-2"><span class="text-emerald-500">‚úÖ</span> ${item}</li>`).join('')}
                </ul>
            `;
            chartsSection.appendChild(readinessContainer);

            // Info Block: Integration Overview
            const integrationInfo = document.createElement('div');
            integrationInfo.className = "bg-brand-dark text-white p-6 rounded-xl shadow-sm lg:col-span-2 flex flex-col justify-center";
            integrationInfo.innerHTML = `
                <h3 class="font-bold text-xl mb-4 font-serif">Integration & Escalation Channels</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="text-brand-orange font-semibold text-sm mb-2 uppercase">Core Integrations</h4>
                        <ul class="space-y-2 text-sm text-slate-300">
                            <li>‚Ä¢ <strong>Event Bus:</strong> User interactions, purchases, support logs.</li>
                            <li>‚Ä¢ <strong>Product Service:</strong> Nightly attribute batch sync.</li>
                            <li>‚Ä¢ <strong>Auth:</strong> Role-based context (Buyer, Vendor, etc).</li>
                            <li>‚Ä¢ <strong>Orders:</strong> Scoped retrieval for context.</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="text-brand-orange font-semibold text-sm mb-2 uppercase">Support Escalation</h4>
                        <ul class="space-y-2 text-sm text-slate-300">
                            <li class="flex items-center gap-2"><span class="bg-white/10 p-1 rounded">üìû</span> +234-01-800-GDEALS</li>
                            <li class="flex items-center gap-2"><span class="bg-white/10 p-1 rounded">‚úâÔ∏è</span> support@goodeals.africa</li>
                            <li class="mt-2 text-xs border-t border-slate-700 pt-2"><strong>SLA:</strong> < 4 business hours initial human follow-up.</li>
                        </ul>
                    </div>
                </div>
            `;
            chartsSection.appendChild(integrationInfo);

            container.appendChild(chartsSection);

            // Initialize interactions after DOM mount
            requestAnimationFrame(() => {
                animateCounters();
                initReadinessChart();
            });
        }

        function renderStrategy(container) {
            container.innerHTML = `
                <div class="mb-6 fade-in">
                    <h2 class="text-3xl font-serif font-bold text-slate-800 mb-2">Strategic Outcomes</h2>
                    <p class="text-slate-600">AI capabilities tailored to specific ecosystem roles to drive network effects.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 fade-in">
                    ${reportData.roles.map(role => `
                        <div class="bg-white p-6 rounded-xl border-l-4 border-brand-orange shadow-sm hover:shadow-lg transition-all group cursor-default">
                            <div class="flex justify-between items-start mb-4">
                                <div class="bg-orange-50 w-12 h-12 rounded-full flex items-center justify-center text-2xl group-hover:scale-110 transition-transform">
                                    ${role.icon}
                                </div>
                                <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full font-semibold uppercase">${role.title}</span>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">${role.outcome}</h3>
                            <p class="text-slate-600 leading-relaxed">${role.details}</p>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function renderArchitecture(container) {
            container.innerHTML = `
                <div class="mb-6 fade-in">
                    <h2 class="text-3xl font-serif font-bold text-slate-800 mb-2">System Architecture</h2>
                    <p class="text-slate-600">A modular, safe, and observable stack designed for high-concurrency e-commerce.</p>
                </div>

                <!-- Backend Pillars -->
                <div class="mb-10 fade-in">
                    <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="bg-slate-200 text-slate-700 w-6 h-6 rounded flex items-center justify-center text-xs">BE</span>
                        Backend Implementation Pillars
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        ${reportData.backendPillars.map(pillar => `
                            <div class="bg-white p-5 rounded-lg border border-stone-200 shadow-sm">
                                <h4 class="font-bold text-brand-orange mb-2">${pillar.title}</h4>
                                <p class="text-sm text-slate-600">${pillar.desc}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <!-- Frontend Principles -->
                <div class="fade-in">
                    <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="bg-slate-200 text-slate-700 w-6 h-6 rounded flex items-center justify-center text-xs">FE</span>
                        Frontend UX Principles
                    </h3>
                    <div class="bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden">
                        <div class="grid grid-cols-1 md:grid-cols-5 divide-y md:divide-y-0 md:divide-x divide-stone-100">
                            ${reportData.uxPrinciples.map(principle => `
                                <div class="p-6 text-center hover:bg-stone-50 transition-colors">
                                    <h4 class="font-bold text-slate-800 mb-2">${principle.title}</h4>
                                    <p class="text-xs text-slate-500">${principle.desc}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>

                <!-- Module Structure Visual -->
                <div class="mt-10 fade-in">
                    <h3 class="text-xl font-bold text-slate-800 mb-4">Module Structure</h3>
                    <div class="bg-slate-900 text-slate-300 p-6 rounded-xl font-mono text-sm overflow-x-auto shadow-inner">
<pre>src/ai/
  ‚îú‚îÄ‚îÄ ai.module.ts             # Core Module
  ‚îú‚îÄ‚îÄ services/
  ‚îÇ   ‚îú‚îÄ‚îÄ ai.service.ts        # Facade Orchestrator
  ‚îÇ   ‚îú‚îÄ‚îÄ provider-registry.ts # Extensibility Layer
  ‚îÇ   ‚îî‚îÄ‚îÄ inference/           # Gemini Client Wrapper
  ‚îî‚îÄ‚îÄ dto/                     # Strict Validation Layer
      ‚îú‚îÄ‚îÄ support-chat.dto.ts
      ‚îî‚îÄ‚îÄ product-discovery.dto.ts</pre>
                    </div>
                </div>
            `;
        }

        function renderExecution(container) {
            container.innerHTML = `
                <div class="mb-6 fade-in">
                    <h2 class="text-3xl font-serif font-bold text-slate-800 mb-2">Execution Roadmap</h2>
                    <p class="text-slate-600">Phased rollout strategy ensuring stability and performance.</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 mb-8 fade-in">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="font-bold text-lg text-slate-800">Waves & Sprints Timeline</h3>
                        <div class="flex gap-4 text-sm">
                            <span class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-slate-700"></span> Backend (Waves)</span>
                            <span class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-brand-orange"></span> Frontend (Sprints)</span>
                        </div>
                    </div>
                    <div class="chart-container" style="height: 400px;">
                        <canvas id="roadmapChart"></canvas>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 fade-in">
                    <!-- Rollback Strategy -->
                    <div class="bg-red-50 p-6 rounded-xl border border-red-100">
                        <h3 class="font-bold text-red-800 mb-3 flex items-center gap-2">‚ö†Ô∏è Rollback Strategy</h3>
                        <ul class="list-disc list-inside space-y-2 text-sm text-red-700">
                            <li><strong>Feature Flags:</strong> Individual capability toggles.</li>
                            <li><strong>Blue/Green Deploy:</strong> <code class="bg-white px-1 rounded">AI_STACK_VERSION</code> env var switching.</li>
                            <li><strong>Severe Issue:</strong> Immediate purge of in-flight tasks and human escalation.</li>
                        </ul>
                    </div>
                    <!-- Definition of Done -->
                    <div class="bg-emerald-50 p-6 rounded-xl border border-emerald-100">
                        <h3 class="font-bold text-emerald-800 mb-3 flex items-center gap-2">‚úÖ Definition of Done</h3>
                        <ul class="list-disc list-inside space-y-2 text-sm text-emerald-700">
                            <li><strong>Latency:</strong> p95 goal met per capability.</li>
                            <li><strong>Security:</strong> Secrets not logged, permissions passed.</li>
                            <li><strong>Observability:</strong> Metrics & logs visible in dashboard.</li>
                            <li><strong>Docs:</strong> Internal runbook updated.</li>
                        </ul>
                    </div>
                </div>
            `;
            
            requestAnimationFrame(initRoadmapChart);
        }

        function renderSafety(container) {
            container.innerHTML = `
                <div class="mb-6 fade-in">
                    <h2 class="text-3xl font-serif font-bold text-slate-800 mb-2">Safety & Alignment</h2>
                    <p class="text-slate-600">Ensuring factual precision, cultural relevance, and user safety.</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 fade-in">
                    <!-- Prompt Framework -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="font-bold text-lg text-slate-800 mb-4">Prompt Engineering Framework</h3>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <div class="w-32 text-xs font-bold text-slate-500 uppercase">System Layer</div>
                                <div class="flex-1 bg-slate-100 p-2 rounded text-sm border-l-4 border-slate-500">Enforce role, safety, 5 Cs</div>
                            </div>
                            <div class="flex items-center">
                                <div class="w-32 text-xs font-bold text-brand-orange uppercase">Context Layer</div>
                                <div class="flex-1 bg-orange-50 p-2 rounded text-sm border-l-4 border-brand-orange">Inject vetted knowledge snippets</div>
                            </div>
                            <div class="flex items-center">
                                <div class="w-32 text-xs font-bold text-blue-500 uppercase">Personalization</div>
                                <div class="flex-1 bg-blue-50 p-2 rounded text-sm border-l-4 border-blue-500">Reflect user preferences succinctly</div>
                            </div>
                            <div class="flex items-center">
                                <div class="w-32 text-xs font-bold text-emerald-500 uppercase">Output Guard</div>
                                <div class="flex-1 bg-emerald-50 p-2 rounded text-sm border-l-4 border-emerald-500">Format & JSON constraints</div>
                            </div>
                        </div>
                    </div>

                    <!-- Incident Response -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="font-bold text-lg text-slate-800 mb-4">Incident Response Pyramid</h3>
                        <div class="flex flex-col gap-2">
                            <div class="bg-red-100 p-4 rounded text-center border border-red-200">
                                <h4 class="font-bold text-red-800">Sev 1: Critical</h4>
                                <p class="text-xs text-red-700">Regulatory violation / unsafe advice. <br><strong>Action:</strong> Immediately disable capability.</p>
                            </div>
                            <div class="bg-orange-100 p-4 rounded text-center border border-orange-200 mx-4">
                                <h4 class="font-bold text-orange-800">Sev 2: Systemic</h4>
                                <p class="text-xs text-orange-700">Hallucinations > 5%. <br><strong>Action:</strong> Patch prompt & hotfix.</p>
                            </div>
                            <div class="bg-blue-100 p-4 rounded text-center border border-blue-200 mx-8">
                                <h4 class="font-bold text-blue-800">Sev 3: Isolated</h4>
                                <p class="text-xs text-blue-700">Retrieval gap. <br><strong>Action:</strong> Add document & reindex.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Behavioral North Star -->
                <div class="mt-8 bg-brand-dark text-white p-8 rounded-xl shadow-lg fade-in">
                    <h3 class="font-serif font-bold text-xl mb-4 text-brand-orange">Behavioral North Star</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="font-bold mb-2">Identity</h4>
                            <p class="text-slate-300 text-sm">"GOODEALS Genius" ‚Äì an expert commerce guide & support concierge. Professional, empowering, concise, and culturally respectful.</p>
                        </div>
                        <div>
                            <h4 class="font-bold mb-2 text-red-400">Strictly Forbidden</h4>
                            <p class="text-slate-300 text-sm">Fabricating policies, speculative financial claims, unverifiable medical advice, or disclosing private vendor metrics.</p>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- Interaction Helpers ---

        function animateCounters() {
            reportData.northStars.forEach((metric, index) => {
                const el = document.getElementById(`counter-${index}`);
                if (!el) return;
                
                let start = 0;
                const end = metric.value;
                const duration = 1500;
                const startTime = performance.now();

                function update(currentTime) {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    // EaseOutQuart
                    const ease = 1 - Math.pow(1 - progress, 4);
                    
                    const current = Math.floor(start + (end - start) * ease);
                    el.innerText = current > 0 ? `+${current}` : current;

                    if (progress < 1) {
                        requestAnimationFrame(update);
                    } else {
                        el.innerText = end > 0 ? `+${end}` : end;
                    }
                }
                requestAnimationFrame(update);
            });
        }

        // --- Chart Configurations ---

        function initReadinessChart() {
            const ctx = document.getElementById('readinessChart');
            if(!ctx) return;

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Ready', 'Pending'],
                    datasets: [{
                        data: [reportData.readiness.pass, reportData.readiness.total - reportData.readiness.pass],
                        backgroundColor: ['#10b981', '#e2e8f0'], // Emerald-500, Slate-200
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '75%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    }
                }
            });
        }

        function initRoadmapChart() {
            const ctx = document.getElementById('roadmapChart');
            if(!ctx) return;

            // Prepare data for Gantt-like bar chart
            // Chart.js floating bars: [start, end]
            
            const backendData = reportData.roadmap.backend.map(item => ({
                x: [item.start, item.start + item.duration],
                y: item.name
            }));
            
            const frontendData = reportData.roadmap.frontend.map(item => ({
                x: [item.start, item.start + item.duration],
                y: item.name
            }));

            // All labels combined for Y axis
            const labels = [...reportData.roadmap.backend.map(i => i.name), ...reportData.roadmap.frontend.map(i => i.name)];

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Backend Waves',
                            data: backendData,
                            backgroundColor: '#1e293b', // Slate-800
                            borderRadius: 4,
                            barPercentage: 0.6
                        },
                        {
                            label: 'Frontend Sprints',
                            data: frontendData,
                            backgroundColor: '#f97316', // Orange-500
                            borderRadius: 4,
                            barPercentage: 0.6
                        }
                    ]
                },
                options: {
                    indexAxis: 'y', // Horizontal bars
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            min: 0,
                            max: 10,
                            title: { display: true, text: 'Timeline (Weeks)' },
                            grid: { color: '#f1f5f9' }
                        },
                        y: {
                            grid: { display: false }
                        }
                    },
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const raw = context.raw;
                                    const duration = raw.x[1] - raw.x[0];
                                    return `Duration: ${duration} week${duration > 1 ? 's' : ''}`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Start
        init();

    </script>
</body>
</html>